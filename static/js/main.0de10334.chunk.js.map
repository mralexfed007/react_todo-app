{"version":3,"sources":["components/TodosContext/TodosContext.jsx","components/TodoApp/TodoApp.jsx","components/TodoItem/TodoItem.jsx","filterTodos.js","components/TodosFilter/TodosFilter.jsx","components/TodoList/TodoList.jsx","App.js","index.js"],"names":["TodosContext","React","createContext","todos","setTodos","TodosProvider","children","useState","contextValue","useEffect","storage","JSON","parse","localStorage","getItem","Provider","value","TodoApp","useContext","title","completed","id","Date","todo","setTodo","onSubmit","e","preventDefault","prev","setItem","stringify","onChange","target","type","className","placeholder","TodoItem","onEdit","setOnEdit","editedTodo","setEditedTodo","find","searchTodo","textInput","useRef","editTodo","useCallback","newTodoList","index","findIndex","item","current","focus","ClassNames","editing","onDoubleClick","checked","onClick","splice","ref","onKeyDown","key","onBlur","filterTodos","arr","param","filter","TodosFilter","path","useLocation","pathname","count","length","clearComleted","map","forEach","todoId","newTodos","selected","to","TodoList","allCompleted","useMemo","toggleAll","htmlFor","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0de10334.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nexport const TodosContext = React.createContext({\n  todos: [],\n  setTodos: () => {},\n});\n\nexport const TodosProvider = ({ children }) => {\n  const [todos, setTodos] = useState([]);\n  const contextValue = {\n    todos,\n    setTodos,\n  };\n\n  useEffect(() => {\n    const storage = JSON.parse(localStorage.getItem('todos') || '[]');\n\n    setTodos(storage);\n  }, []);\n\n  return (\n    <TodosContext.Provider value={contextValue}>\n      {children}\n    </TodosContext.Provider>\n  );\n};\n\nTodosProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n","import React, { useState, useContext } from 'react';\nimport { TodosContext } from '../TodosContext';\n\nexport const TodoApp = () => {\n  const { todos, setTodos } = useContext(TodosContext);\n  const [todo, setTodo] = useState({\n    title: '',\n    completed: false,\n    id: +new Date(),\n  });\n\n  return (\n    <form\n      onSubmit={(e) => {\n        e.preventDefault();\n        setTodos(prev => ([\n          ...prev,\n          { ...todo },\n        ]));\n        setTodo({\n          title: '',\n          completed: false,\n          id: +new Date(),\n        });\n        localStorage.setItem('todos', JSON.stringify(todos));\n      }}\n    >\n      <input\n        value={todo.title}\n        onChange={({ target }) => setTodo(prev => ({\n          ...prev,\n          title: target.value,\n        }))}\n        type=\"text\"\n        className=\"new-todo\"\n        placeholder=\"What needs to be done?\"\n      />\n    </form>\n  );\n};\n","import React, { useContext, useState, useRef,\n  useCallback, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport ClassNames from 'classnames';\nimport { TodosContext } from '../TodosContext';\n\nexport const TodoItem = ({ id }) => {\n  const { todos, setTodos } = useContext(TodosContext);\n  const [onEdit, setOnEdit] = useState(false);\n  const [editedTodo, setEditedTodo] = useState('');\n  const todo = todos.find(searchTodo => searchTodo.id === id);\n  const textInput = useRef(null);\n\n  const editTodo = useCallback(() => {\n    setTodos((prev) => {\n      const newTodoList = prev;\n      const index = newTodoList.findIndex(item => item.id === todo.id);\n\n      newTodoList[index].title = (editedTodo !== '')\n        ? editedTodo\n        : newTodoList[index].title;\n      setEditedTodo('');\n      setOnEdit(false);\n\n      return ([...newTodoList]);\n    });\n    localStorage.setItem('todos', JSON.stringify(todos));\n  }, [editedTodo]);\n\n  useEffect(() => {\n    textInput.current.focus();\n  }, [onEdit]);\n\n  return (\n    <li\n      className={ClassNames({\n        completed: todo.completed,\n        editing: onEdit,\n      })}\n      onDoubleClick={() => setOnEdit(true)}\n    >\n      <div className=\"view\">\n        <input\n          type=\"checkbox\"\n          className=\"toggle\"\n          checked={todo.completed}\n          onChange={({ target }) => setTodos((prev) => {\n            const newTodoList = prev;\n            const index = newTodoList.findIndex(item => item.id === todo.id);\n\n            newTodoList[index].completed = target.checked;\n            localStorage.setItem('todos', JSON.stringify(todos));\n\n            return ([...newTodoList]);\n          })}\n        />\n        <label>{todo.title}</label>\n        <button\n          onClick={() => setTodos((prev) => {\n            const newTodoList = prev;\n            const index = newTodoList.findIndex(item => item.id === todo.id);\n\n            newTodoList.splice(index, 1);\n            localStorage.setItem('todos', JSON.stringify(todos));\n\n            return ([...newTodoList]);\n          })}\n          type=\"button\"\n          className=\"destroy\"\n        />\n      </div>\n      <input\n        type=\"text\"\n        ref={textInput}\n        className=\"edit\"\n        value={editedTodo}\n        onChange={({ target }) => setEditedTodo(target.value)}\n        onKeyDown={(e) => {\n          if (e.key === 'Enter') {\n            editTodo();\n          } else if (e.key === 'Escape') {\n            setEditedTodo(todo.title);\n            setOnEdit(false);\n          }\n        }}\n        onBlur={() => editTodo()}\n      />\n    </li>\n  );\n};\n\nTodoItem.propTypes = {\n  id: PropTypes.number.isRequired,\n};\n","/* eslint-disable no-unreachable */\nexport const filterTodos = (arr, param) => {\n  switch (param) {\n    case '/completed':\n      return arr.filter(todo => todo.completed);\n      break;\n\n    case '/active':\n      return arr.filter(todo => !todo.completed);\n      break;\n\n    default:\n      return arr;\n      break;\n  }\n};\n","import React, { useContext, useCallback } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport ClassNames from 'classnames';\nimport { filterTodos } from '../../filterTodos';\nimport { TodosContext } from '../TodosContext';\n\nexport const TodosFilter = () => {\n  const path = useLocation().pathname;\n  const { todos, setTodos } = useContext(TodosContext);\n\n  const count = filterTodos(todos, '/active').length;\n\n  const filtersArr = [\n    ['All', '/'],\n    ['Active', '/active'],\n    ['Completed', '/completed'],\n  ];\n\n  const clearComleted = useCallback(() => {\n    const completedTodos = filterTodos(todos, '/completed')\n      .map(todo => todo.id);\n\n    completedTodos.forEach((todoId) => {\n      setTodos((prev) => {\n        const newTodos = [...prev];\n\n        const index = newTodos.findIndex(todo => todo.id === todoId);\n\n        newTodos.splice(index, 1);\n\n        return (newTodos);\n      });\n      localStorage.setItem('todos', JSON.stringify(todos));\n    });\n  }, [todos]);\n\n  return (\n    <footer className=\"footer\">\n      <span className=\"todo-count\">\n        {`${count} items left`}\n      </span>\n\n      <ul className=\"filters\">\n        {filtersArr.map(filter => (\n          <li key={filter[0]}>\n            <Link\n              className={ClassNames({\n                selected: path === filter[1],\n              })}\n              to={filter[1]}\n            >\n              {filter[0]}\n            </Link>\n          </li>\n        ))}\n      </ul>\n\n      <button\n        type=\"button\"\n        className=\"clear-completed\"\n        onClick={clearComleted}\n      >\n        Clear completed\n      </button>\n    </footer>\n  );\n};\n","import React, { useCallback, useContext, useMemo } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { TodosContext } from '../TodosContext';\nimport { TodoItem } from '../TodoItem';\nimport { TodosFilter } from '../TodosFilter';\nimport { filterTodos } from '../../filterTodos';\n\nexport const TodoList = () => {\n  const { todos, setTodos } = useContext(TodosContext);\n  const filter = useLocation().pathname;\n\n  const allCompleted = useMemo(() => (todos.length\n    === filterTodos(todos, '/completed').length), [todos]);\n  const toggleAll = useCallback(() => {\n    setTodos((prev) => {\n      let newTodos = [...prev];\n\n      newTodos = newTodos.map(todo => ({\n        ...todo,\n        completed: !allCompleted,\n      }));\n      localStorage.setItem('todos', JSON.stringify(todos));\n\n      return [...newTodos];\n    });\n  }, [todos, allCompleted]);\n\n  return (\n    <section className=\"main\">\n      <input\n        type=\"checkbox\"\n        id=\"toggle-all\"\n        className=\"toggle-all\"\n        checked={allCompleted}\n        onChange={toggleAll}\n      />\n      <label htmlFor=\"toggle-all\">Mark all as complete</label>\n      <ul className=\"todo-list\">\n        {filterTodos(todos, filter).map(todo => (\n          <TodoItem key={todo.id} id={todo.id} />\n        ))}\n      </ul>\n      {todos.length !== 0 && (<TodosFilter />)}\n    </section>\n  );\n};\n","import React from 'react';\nimport { TodoApp } from './components/TodoApp';\nimport { TodoList } from './components/TodoList';\n\nfunction App() {\n  return (\n    <section className=\"todoapp\">\n      <header className=\"header\">\n        <h1>todos</h1>\n        <TodoApp />\n      </header>\n      <TodoList />\n    </section>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport { TodosProvider } from './components/TodosContext';\n\nimport './styles/index.css';\nimport './styles/todo-list.css';\nimport './styles/filters.css';\n\nimport App from './App';\n\nReactDOM.render(\n  <HashRouter>\n    <TodosProvider>\n      <App />\n    </TodosProvider>\n  </HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}