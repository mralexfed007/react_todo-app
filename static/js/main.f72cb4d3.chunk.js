(this["webpackJsonpreact_todo-app"]=this["webpackJsonpreact_todo-app"]||[]).push([[0],{22:function(e,t,n){e.exports=n(35)},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(20),l=n.n(o),r=n(11),u=n(8),i=c.a.createContext({todos:[],setTodos:function(){}}),s=function(e){var t=e.children,n=Object(a.useState)([]),o=Object(u.a)(n,2),l=o[0],r=o[1],s={todos:l,setTodos:r};return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("todos")||"[]");r(e)}),[]),c.a.createElement(i.Provider,{value:s},t)},d=(n(27),n(28),n(29),n(7)),m=n(6),f=function(){var e=Object(a.useContext)(i),t=e.todos,n=e.setTodos,o=Object(a.useState)({title:"",completed:!1,id:+new Date}),l=Object(u.a)(o,2),r=l[0],s=l[1],f=Object(a.useCallback)((function(e){e.preventDefault(),r.title.trim()&&(n((function(e){return[].concat(Object(m.a)(e),[Object(d.a)(Object(d.a)({},r),{},{title:r.title.trim()})])})),s({title:"",completed:!1,id:+new Date}),localStorage.setItem("todos",JSON.stringify(t)))}),[r]),b=Object(a.useCallback)((function(e){var t=e.target;return s((function(e){return Object(d.a)(Object(d.a)({},e),{},{title:t.value})}))}),[]);return c.a.createElement("form",{onSubmit:f},c.a.createElement("input",{value:r.title,onChange:b,type:"text",className:"new-todo",placeholder:"What needs to be done?"}))},b=n(1),p=n(14),O=n.n(p),j=function(e){var t=e.id,n=Object(a.useContext)(i),o=n.todos,l=n.setTodos,r=Object(a.useState)(!1),s=Object(u.a)(r,2),d=s[0],f=s[1],b=o.find((function(e){return e.id===t})),p=Object(a.useState)(b.title),j=Object(u.a)(p,2),g=j[0],E=j[1],v=Object(a.useRef)(null),h=Object(a.useCallback)((function(){E(b.title),f(!1)}),[b]),k=Object(a.useCallback)((function(){l((function(e){var t=e,n=t.findIndex((function(e){return e.id===b.id}));return t[n].title=g.trim()?g.trim():t[n].title,h(),Object(m.a)(t)})),localStorage.setItem("todos",JSON.stringify(o))}),[g]),C=Object(a.useCallback)((function(e){"Enter"===e.key?k():"Escape"===e.key&&h()}),[b,k]),N=Object(a.useCallback)((function(e){var t=e.target;return l((function(e){var n=e,a=n.findIndex((function(e){return e.id===b.id}));return n[a].completed=t.checked,localStorage.setItem("todos",JSON.stringify(o)),Object(m.a)(n)}))}),[]),y=Object(a.useCallback)((function(){return l((function(e){var t=e,n=t.findIndex((function(e){return e.id===b.id}));return t.splice(n,1),localStorage.setItem("todos",JSON.stringify(o)),Object(m.a)(t)}))}),[]);return Object(a.useEffect)((function(){v.current.focus()}),[d]),c.a.createElement("li",{className:O()({completed:b.completed,editing:d}),onDoubleClick:function(){return f(!0)}},c.a.createElement("div",{className:"view"},c.a.createElement("input",{type:"checkbox",className:"toggle",checked:b.completed,onChange:N}),c.a.createElement("label",null,b.title),c.a.createElement("button",{onClick:y,type:"button",className:"destroy"})),c.a.createElement("input",{type:"text",ref:v,className:"edit",value:g,onChange:function(e){var t=e.target;return E(t.value)},onKeyDown:C,onBlur:function(){return k()}}))},g=function(e,t){switch(t){case"/completed":return e.filter((function(e){return e.completed}));case"/active":return e.filter((function(e){return!e.completed}));default:return e}},E=function(){var e=Object(b.d)().pathname,t=Object(a.useContext)(i),n=t.todos,o=t.setTodos,l=g(n,"/active").length,u=Object(a.useCallback)((function(){g(n,"/completed").map((function(e){return e.id})).forEach((function(e){o((function(t){var n=Object(m.a)(t),a=n.findIndex((function(t){return t.id===e}));return n.splice(a,1),n})),localStorage.setItem("todos",JSON.stringify(n))}))}),[n]);return c.a.createElement("footer",{className:"footer"},c.a.createElement("span",{className:"todo-count"},"".concat(l," items left")),c.a.createElement("ul",{className:"filters"},[["All","/"],["Active","/active"],["Completed","/completed"]].map((function(t){return c.a.createElement("li",{key:t[0]},c.a.createElement(r.b,{className:O()({selected:e===t[1]}),to:t[1]},t[0]))}))),c.a.createElement("button",{type:"button",className:"clear-completed",onClick:u},"Clear completed"))},v=function(){var e=Object(a.useContext)(i),t=e.todos,n=e.setTodos,o=Object(b.d)().pathname,l=Object(a.useMemo)((function(){return t.length===g(t,"/completed").length}),[t]),r=Object(a.useCallback)((function(){n((function(e){var n=Object(m.a)(e);return n=n.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{completed:!l})})),localStorage.setItem("todos",JSON.stringify(t)),Object(m.a)(n)}))}),[t,l]);return c.a.createElement("section",{className:"main"},c.a.createElement("input",{type:"checkbox",id:"toggle-all",className:"toggle-all",checked:l,onChange:r}),c.a.createElement("label",{htmlFor:"toggle-all"},"Mark all as complete"),c.a.createElement("ul",{className:"todo-list"},g(t,o).map((function(e){return c.a.createElement(j,{key:e.id,id:e.id})}))),0!==t.length&&c.a.createElement(E,null))};var h=function(){return c.a.createElement("section",{className:"todoapp"},c.a.createElement("header",{className:"header"},c.a.createElement("h1",null,"todos"),c.a.createElement(f,null)),c.a.createElement(v,null))};l.a.render(c.a.createElement(r.a,null,c.a.createElement(s,null,c.a.createElement(h,null))),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.f72cb4d3.chunk.js.map