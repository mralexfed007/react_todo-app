(this["webpackJsonpreact_todo-app"]=this["webpackJsonpreact_todo-app"]||[]).push([[0],{22:function(e,t,n){e.exports=n(35)},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(20),r=n.n(o),l=n(11),u=n(7),i=c.a.createContext({todos:[],setTodos:function(){}}),s=function(e){var t=e.children,n=Object(a.useState)([]),o=Object(u.a)(n,2),r=o[0],l=o[1],s={todos:r,setTodos:l};return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("todos")||"[]");l(e)}),[]),c.a.createElement(i.Provider,{value:s},t)},d=(n(27),n(28),n(29),n(9)),m=n(6),f=function(){var e=Object(a.useContext)(i),t=e.todos,n=e.setTodos,o=Object(a.useState)({title:"",completed:!1,id:+new Date}),r=Object(u.a)(o,2),l=r[0],s=r[1];return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n((function(e){return[].concat(Object(m.a)(e),[Object(d.a)({},l)])})),s({title:"",completed:!1,id:+new Date}),localStorage.setItem("todos",JSON.stringify(t))}},c.a.createElement("input",{value:l.title,onChange:function(e){var t=e.target;return s((function(e){return Object(d.a)(Object(d.a)({},e),{},{title:t.value})}))},type:"text",className:"new-todo",placeholder:"What needs to be done?"}))},p=n(1),b=n(14),O=n.n(b),g=function(e){var t=e.id,n=Object(a.useContext)(i),o=n.todos,r=n.setTodos,l=Object(a.useState)(!1),s=Object(u.a)(l,2),d=s[0],f=s[1],p=Object(a.useState)(""),b=Object(u.a)(p,2),g=b[0],E=b[1],j=o.find((function(e){return e.id===t})),v=Object(a.useRef)(null),h=Object(a.useCallback)((function(){r((function(e){var t=e,n=t.findIndex((function(e){return e.id===j.id}));return t[n].title=""!==g?g:t[n].title,E(""),f(!1),Object(m.a)(t)})),localStorage.setItem("todos",JSON.stringify(o))}),[g]);return Object(a.useEffect)((function(){v.current.focus()}),[d]),c.a.createElement("li",{className:O()({completed:j.completed,editing:d}),onDoubleClick:function(){return f(!0)}},c.a.createElement("div",{className:"view"},c.a.createElement("input",{type:"checkbox",className:"toggle",checked:j.completed,onChange:function(e){var t=e.target;return r((function(e){var n=e,a=n.findIndex((function(e){return e.id===j.id}));return n[a].completed=t.checked,localStorage.setItem("todos",JSON.stringify(o)),Object(m.a)(n)}))}}),c.a.createElement("label",null,j.title),c.a.createElement("button",{onClick:function(){return r((function(e){var t=e,n=t.findIndex((function(e){return e.id===j.id}));return t.splice(n,1),localStorage.setItem("todos",JSON.stringify(o)),Object(m.a)(t)}))},type:"button",className:"destroy"})),c.a.createElement("input",{type:"text",ref:v,className:"edit",value:g,onChange:function(e){var t=e.target;return E(t.value)},onKeyDown:function(e){"Enter"===e.key?h():"Escape"===e.key&&(E(j.title),f(!1))},onBlur:function(){return h()}}))},E=function(e,t){switch(t){case"/completed":return e.filter((function(e){return e.completed}));case"/active":return e.filter((function(e){return!e.completed}));default:return e}},j=function(){var e=Object(p.d)().pathname,t=Object(a.useContext)(i),n=t.todos,o=t.setTodos,r=E(n,"/active").length,u=Object(a.useCallback)((function(){E(n,"/completed").map((function(e){return e.id})).forEach((function(e){o((function(t){var n=Object(m.a)(t),a=n.findIndex((function(t){return t.id===e}));return n.splice(a,1),n})),localStorage.setItem("todos",JSON.stringify(n))}))}),[n]);return c.a.createElement("footer",{className:"footer"},c.a.createElement("span",{className:"todo-count"},"".concat(r," items left")),c.a.createElement("ul",{className:"filters"},[["All","/"],["Active","/active"],["Completed","/completed"]].map((function(t){return c.a.createElement("li",{key:t[0]},c.a.createElement(l.b,{className:O()({selected:e===t[1]}),to:t[1]},t[0]))}))),c.a.createElement("button",{type:"button",className:"clear-completed",onClick:u},"Clear completed"))},v=function(){var e=Object(a.useContext)(i),t=e.todos,n=e.setTodos,o=Object(p.d)().pathname,r=Object(a.useMemo)((function(){return t.length===E(t,"/completed").length}),[t]),l=Object(a.useCallback)((function(){n((function(e){var n=Object(m.a)(e);return n=n.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{completed:!r})})),localStorage.setItem("todos",JSON.stringify(t)),Object(m.a)(n)}))}),[t,r]);return c.a.createElement("section",{className:"main"},c.a.createElement("input",{type:"checkbox",id:"toggle-all",className:"toggle-all",checked:r,onChange:l}),c.a.createElement("label",{htmlFor:"toggle-all"},"Mark all as complete"),c.a.createElement("ul",{className:"todo-list"},E(t,o).map((function(e){return c.a.createElement(g,{key:e.id,id:e.id})}))),0!==t.length&&c.a.createElement(j,null))};var h=function(){return c.a.createElement("section",{className:"todoapp"},c.a.createElement("header",{className:"header"},c.a.createElement("h1",null,"todos"),c.a.createElement(f,null)),c.a.createElement(v,null))};r.a.render(c.a.createElement(l.a,null,c.a.createElement(s,null,c.a.createElement(h,null))),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.0de10334.chunk.js.map